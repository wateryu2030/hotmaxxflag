# Cursor 与 OpenClaw 全自动运行配置

使 **Cursor** 和 **OpenClaw** 均可**自主工作、全自动运行、无需手动确认**。

---

## 一、Cursor 全自动运行

### 1. 已自动写入的配置

已在以下位置写入自动运行相关配置（无需手动找页面即可生效，若 Cursor 识别这些键）：

- **用户级**：`~/Library/Application Support/Cursor/User/settings.json`
- **本仓库**：`.vscode/settings.json`

写入的键包括：`cursor.agent.autoRunMode: "runEverything"`、`cursor.chat.autoRun: true`、`cursor.terminal.autoRun: true`、`cursor.terminal.commandAllowlist`（含 npm、bash、python、cd、curl、mysql、node 等）。

**请重启 Cursor** 或重新打开本仓库后再试；若仍会弹确认，说明当前 Cursor 版本未读取这些 JSON 键，请按下面步骤在界面里手动打开。

### 2. 若需手动打开（找不到时）

1. 打开 Cursor **设置**：`Cmd + ,`（Mac）或 `Ctrl + ,`（Windows/Linux）。
2. 在设置顶部的**搜索框**输入：**auto** 或 **allowlist** 或 **Agent**。
3. 找到 **「Auto-Run」** / **「Auto Run Mode」** 相关项：
   - 将 **Auto-Run Mode** 选为 **「Run in Sandbox」** 或 **「Run Everything」**（选 Run Everything 则全部自动执行、无需确认）。
4. 找到 **「Command allowlist」** / **「Terminal command allowlist」**：
   - 添加允许自动执行的命令或描述，例如：`npm run`、`bash`、`python`、`cd`、`curl`、`mysql`、`source`、`node`。

**备选入口**：按 **`Cmd + Shift + J`**（Mac）或 **`Ctrl + Shift + J`**（Windows）打开 **Cursor Settings**，再进入 **Agents → Auto-Run** 进行上述设置。

### 3. 项目规则（已配置）

本项目已添加 **`.cursor/rules/autonomous.mdc`**，约定：

- Agent 在本项目中**自主拆解任务、直接执行命令与编辑**，无需每步向用户确认。
- 仅在高风险操作（如生产覆盖、`rm -rf`、`git push`）时提示或需确认。

打开本项目时，该规则会自动生效。

---

## 二、OpenClaw 全自动运行

### 1. 合并推荐配置（exec 不弹确认）

将本项目的 **全自动** 配置合并到 OpenClaw 用户配置，使 `exec` 等工具**不询问、直接执行**：

```bash
# 一键合并（在项目根目录执行）
cd /Users/document/好特卖超级仓/数据分析 && npm run openclaw:merge
# 或
bash scripts/merge_openclaw_autonomous.sh
```

或手动合并：

- 打开 **`~/.openclaw/openclaw.json`**。
- 将 **`config/openclaw-htma-autonomous.json`** 的内容合并进去，重点保证：
  - `tools.exec.ask` 为 **`"off"`**（执行命令时不询问）。
  - `tools.allow` 包含 **`exec`、`read`、`write`、`edit`**，需要时包含 **`browser`**。

### 2. 关键配置项

| 配置项 | 含义 |
|--------|------|
| `tools.exec.ask": "off"` | 终端命令不弹确认，全自动执行 |
| `tools.allow` | 允许使用的工具，如 exec、read、write、edit、browser |
| `skills.load.extraDirs` | 指向本项目 `skills` 目录，便于加载货盘比价、自主编程等 Skill |

### 3. 自主工作触发方式

在 OpenClaw 对话中说（任选其一）：

- **「利用 openclaw 自主完成编程工作」**
- **「OpenClaw 自主改造」** / **「调用 openclaw 自主完成实际改造工作」**
- **「执行自主比价直到成功」**（比价任务）

OpenClaw 会加载本项目 skills，并按「自主决策、直接调用终端与浏览器」的方式运行，无需每步确认。

---

## 三、小结

| 环境 | 全自动要点 |
|------|------------|
| **Cursor** | 1）开启 Enable auto-run mode；2）在 Command allowlist 中允许 npm/bash/python 等；3）本项目 `.cursor/rules/autonomous.mdc` 已约定自主执行。 |
| **OpenClaw** | 合并 `config/openclaw-htma-autonomous.json`，保证 `exec.ask: "off"`，并用对话触发自主编程/比价。 |

配置完成后，Cursor 与 OpenClaw 均可**全自动运行、无需手动确认**。
